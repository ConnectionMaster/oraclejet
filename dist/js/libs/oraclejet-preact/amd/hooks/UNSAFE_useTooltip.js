define(["exports","preact/hooks","preact/jsx-runtime",'css!./UNSAFE_useTooltip.css',"./UNSAFE_useId","../UNSAFE_Floating","../UNSAFE_Layer","./UNSAFE_useHover","./UNSAFE_useFocus","./UNSAFE_useTouch","../utils/UNSAFE_mergeProps","../utils/UNSAFE_arrayUtils","../utils/UNSAFE_classNames","../Floating-671b5951","../classNames-b2629d24","preact/compat","preact","./UNSAFE_useToggle","../index-614e09d5","./UNSAFE_useUser","../UNSAFE_Environment","./UNSAFE_useOutsideClick"],(function(e,t,o,n,s,i,u,r,l,a,c,p,m,d,f,v,h,b,g,x,T,A){"use strict";p.stringLiteralArray(["start","top-start","top","top-end","end","bottom-end","bottom","bottom-start"]),p.stringLiteralArray(["element","pointer"]);const E={wrapper:"_uophsw",base:"_gg49p7",datatip:"pb2ba7"},y=({text:e,isOpen:n=!1,variant:i="tooltip",position:p="bottom",isDisabled:m=!1,anchor:v={x:"element",y:"element"},offset:h={mainAxis:0,crossAxis:0},onToggle:b})=>{const[g,x]=t.useState(n?"mounted":"hidden"),T="datatip"===i,{hoverProps:A,isHover:y}=r.useHover({isDisabled:m}),{focusProps:F,isFocus:_}=l.useFocus({isDisabled:m}),{touchProps:N,isTouch:P}=a.useTouch({isDisabled:m}),{hoverProps:S,isHover:U}=r.useHover({isDisabled:m}),{touchProps:j,isTouch:H}=a.useTouch({isDisabled:m}),O=s.useId(),V=t.useRef(!0),w=t.useRef(null),D=t.useRef(null),R=t.useRef({x:0,y:0}),k="element"===v.x&&"element"===v.y?D:R,C=T?0:250,z=e=>{x(e?"mountTimeout":"unmountTimeout")};let I;if(t.useEffect((()=>{V.current?V.current=!1:_||P||z(y)}),[y]),t.useEffect((()=>{V.current?V.current=!1:y||P||z(_)}),[_]),t.useEffect((()=>{V.current?V.current=!1:y||_||z(P)}),[P]),t.useEffect((()=>{V.current?V.current=!1:["mounted","unmountTimeout"].includes(g)&&x(U||H?"mounted":"unmountTimeout")}),[U,H]),t.useEffect((()=>{let e;switch(g){case"mountTimeout":e=setTimeout((()=>x("mountInitialize")),C);break;case"mountInitialize":x("mounting"),null==b||b({value:!0});break;case"mounting":x("mounted");break;case"unmountTimeout":e=setTimeout((()=>x("unmounting")),C);break;case"unmounting":x("unmounted"),null==b||b({value:!1})}return()=>clearTimeout(e)}),[g]),m)I={};else{const e=Object.assign(Object.assign({"aria-describedby":O,onMouseEnter:e=>{e.eventPhase===Event.AT_TARGET&&(D.current=e.target)}},("pointer"===v.x||"pointer"===v.y)&&{onMouseMove:e=>{e.eventPhase===Event.AT_TARGET&&q(e)}}),{onFocus:e=>{e.eventPhase===Event.AT_TARGET&&(D.current=e.target)}});I=c.mergeProps(A,F,N,e)}if(m||!e)return{tooltipContent:null,tooltipProps:I};const L=({floating:e})=>({mainAxis:null==h?void 0:h.mainAxis,crossAxis:-e.width-(h.crossAxis||0)}),M=({floating:e})=>({mainAxis:null==h?void 0:h.mainAxis,crossAxis:e.width+(h.crossAxis||0)}),G={top:{placement:"top",offsetValue:h},"top-end":{placement:"top-end",offsetValue:M},end:{placement:"right",offsetValue:h},"bottom-end":{placement:"bottom-end",offsetValue:M},bottom:{placement:"bottom",offsetValue:h},"bottom-start":{placement:"bottom-start",offsetValue:L},start:{placement:"left",offsetValue:h},"top-start":{placement:"top-start",offsetValue:L}}[p],X="hidden"===g||"mountTimeout"===g,Y=w.current,$={popoverOpacity:["mounted","unmountTimeout"].includes(g)?T?"100%":"95%":"0%",wrapperHeight:!X&&Y?`${null==Y?void 0:Y.offsetHeight}px`:"auto",popoverHeight:"mountInitialize"===g?"none":["mounted","unmountTimeout"].includes(g)&&Y?`${null==Y?void 0:Y.offsetHeight}px`:"0"};let W;const q=e=>{clearTimeout(W),"pointer"===v.x&&"pointer"===v.y?(R.current={x:e.clientX,y:e.clientY},x("mounted"===g?"mounting":"mounted")):"pointer"===v.x?W=setTimeout((()=>{var t,o;const n=(null===(t=null==D?void 0:D.current)||void 0===t?void 0:t.offsetHeight)||0,s=((null===(o=null==D?void 0:D.current)||void 0===o?void 0:o.offsetTop)||0)+n;R.current={x:e.clientX,y:s},null==b||b({value:!0})}),C):"pointer"===v.y&&(W=setTimeout((()=>{var t,o;const n=(null===(t=null==D?void 0:D.current)||void 0===t?void 0:t.offsetWidth)||0,s=((null===(o=null==D?void 0:D.current)||void 0===o?void 0:o.offsetLeft)||0)+n;R.current={x:s,y:e.clientY},null==b||b({value:!0})}),C))},B=o.jsx(u.Layer,{children:o.jsx(d.Floating,Object.assign({anchorRef:k,placement:G.placement,offsetValue:G.offsetValue},{children:o.jsx("div",Object.assign({id:O,role:"tooltip"},S,j,{class:E.wrapper,style:{height:$.wrapperHeight}},{children:o.jsx("div",Object.assign({style:{opacity:$.popoverOpacity,maxHeight:$.popoverHeight,transition:"max-height 0.1s cubic-bezier(0.0, 0.0, 0.2, 1), opacity 0.1s cubic-bezier(0.0, 0.0, 0.2, 1)"},onTransitionEnd:e=>{"mounting"===g&&x("mounted"),"unmounted"===g&&x("hidden")}},{children:o.jsx("div",Object.assign({ref:w,class:f.classNames([E.base,T?E[i]:""])},{children:e}))}))}))}))});return{tooltipContent:!X&&B,tooltipProps:I}};e.useTooltip=({text:e,position:o="bottom",isDisabled:n=!1,anchor:s={x:"element",y:"element"},offset:i={mainAxis:0,crossAxis:0}})=>{const[u,r]=t.useState(!1),l=n||!e,{tooltipContent:a,tooltipProps:c}=y({text:e,isOpen:u,position:o,isDisabled:l,offset:i,anchor:s,onToggle:({value:e})=>r(e)});return{tooltipContent:a,tooltipProps:c}},e.useTooltipControlled=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useTooltip.js.map
