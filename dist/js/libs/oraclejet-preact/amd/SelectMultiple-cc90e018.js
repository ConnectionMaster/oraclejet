function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}define(["exports","preact/jsx-runtime","preact","preact/compat","./hooks/UNSAFE_useFocusableTextField","./hooks/UNSAFE_useFormContext","./hooks/UNSAFE_useFormFieldContext","./hooks/UNSAFE_useLoadingIndicatorTimer","./hooks/UNSAFE_useTextField","./UNSAFE_Flex","./UNSAFE_Label","./UNSAFE_LiveRegion","./UNSAFE_TextField","./UNSAFE_UserAssistance","./utils/PRIVATE_clientHints","preact/hooks",'module',"./UNSAFE_HighlightText","./UNSAFE_ListView","./utils/UNSAFE_logger","./HighlightText-107c8f33","./ListView-8a77c09a","./UNSAFE_Floating","./UNSAFE_Layer","./hooks/UNSAFE_useOutsideClick","./Floating-671b5951","./hooks/UNSAFE_usePress","./utils/UNSAFE_classNames","./classNames-b2629d24","./tslib.es6-6b9f8039","./UNSAFE_Chip","./hooks/UNSAFE_useTranslationBundle","./Chip-254e8642","./TextFieldInput-878a4f6a","./Flex-ba68c691","./clientHints-c614d879"],(function(e,n,t,s,o,a,l,i,r,c,u,d,f,v,b,p,h,y,g,m,x,S,T,A,F,w,E,C,_,L,j,R,D,k,O,U){"use strict";function I(e,n){var t;return"string"==typeof n?(null===(t=e.data)||void 0===t?void 0:t.hasOwnProperty(n))?e.data[n]:void m.Logger.error("SelectMultiple: itemText specifies field that does not exist: "+n):n(e)}const P=()=>{};function K({accessibleSummary:e,currentKey:t,data:s,itemText:o,onCurrentKeyChange:a,onLoadRange:l=P,onSelectionChange:i,searchText:r,selectedKeys:c}){const u=p.useCallback((e=>{const t=I({data:e.data,key:e.metadata.key,metadata:e.metadata},o);return n.jsx("div",Object.assign({class:"_3otv08"},{children:n.jsx(x.HighlightText,Object.assign({matchText:r},{children:t}))}))}),[o,r]);return n.jsx(S.ListView,Object.assign({accessibleSummary:e,currentKey:t,data:null!=s?s:null,gridlines:"hidden",onCurrentKeyChange:a,onLoadRange:l,onSelectionChange:i,selectedKeys:{all:!1,keys:null!=c?c:new Set},selectionMode:"multiple"},{children:e=>u(e)}))}const N={TAB:"Tab",ENTER:"Enter",ESC:"Escape",SPACE:"Space",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",SHIFT_LEFT:"ShiftLeft",SHIFT_RIGHT:"ShiftRight",CTRL_LEFT:"ControlLeft",CTRL_RIGHT:"ControlRight",ALT_LEFT:"AltLeft",ALT_RIGHT:"AltRight",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",HOME:"Home",END:"End",BACKSPACE:"Backspace",DELETE:"Delete"},H=e=>(e=>{switch(e.code){case N.SHIFT_LEFT:case N.SHIFT_RIGHT:case N.CTRL_LEFT:case N.CTRL_RIGHT:case N.ALT_LEFT:case N.ALT_RIGHT:return!0;default:return e.metaKey||e.ctrlKey}})(e)||(e=>/\bF([1-9]|1[0-2])\b/i.test(e.code))(e),M="l1irv3";function z({anchorRef:e,children:t,dropdownRef:s,id:o,isOpen:a,onAutoDismiss:l}){var i;const r=p.useCallback((e=>{null==l||l(e)}),[l]),c=p.useCallback((e=>{if(!e.defaultPrevented&&!H(e))switch(e.code){case N.ESC:case N.TAB:r(e)}}),[r]);F.default({isDisabled:!a,ref:[e,s],handler:r});const u={minWidth:`${null===(i=e.current)||void 0===i?void 0:i.offsetWidth}px`};return a?n.jsx(A.Layer,{children:n.jsx(w.Floating,Object.assign({anchorRef:e,ref:s,placement:"bottom-start",offsetValue:{mainAxis:4,crossAxis:0}},{children:n.jsx("div",Object.assign({class:M,id:o,style:u,onKeyDown:c},{children:t}))}))}):null}const V="_u290a",W="twg85i",B="_f3eafd",$="dxvfy",G="usxalw",q=()=>{};function Z({isDisabled:e=!1,onClick:t,size:s="md"}){const o=p.useCallback((e=>{e.preventDefault()}),[]),{pressProps:a}=E.usePress(null!=t?t:q,{isDisabled:e}),l=_.classNames([V,"sm"===s?B:W,e?G:$]);return n.jsx("span",Object.assign({"aria-hidden":"true",class:l,tabIndex:-1,onMouseDown:o},a,{children:n.jsx("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n.jsx("path",{d:"m6.00803369 8.9999991c3.96646621 4 5.94968971 6 5.94967061 6-.0000192 0 1.9832044-2 5.9496706-6z",fill:"currentColor","fill-rule":"evenodd"})}))}))}const Y="_bjjqqk",J="_7skzed",Q="_r0l2mo";function X({children:e,isLoading:t=!1}){const s=_.classNames([Y,J,t&&Q]);return n.jsx("div",Object.assign({class:s},{children:e}))}function ee(e){var{accessibleLabel:t,count:s=0,onKeyDown:o,onKeyUp:a,onMouseDown:l}=e,i=L.__rest(e,["accessibleLabel","count","onKeyDown","onKeyUp","onMouseDown"]);const r=R.useTranslationBundle("@oracle/oraclejet-preact"),c=r.selectMultiple_showSelectedValues(),u=t?`${t}. `:"",d=r.selectMultiple_countPlus({COUNT:"99"}),f=s>99?`${d}`:`${s}`,v=`${u}${r.selectMultiple_valuesSelected({VALUE_COUNT:`${s}`})} ${c}`;return n.jsx("div",Object.assign({class:"_hne3yc",onKeyDown:o,onKeyUp:a,onMouseDown:l},{children:n.jsx(D.Chip,Object.assign({accessibleLabel:v},i,{children:f}))}))}function ne(e,n){return p.useMemo((()=>{if(!n)return"";const t=function(e,n){const t=n?_toConsumableArray(null==n?void 0:n.values()):[],s=n=>I(n,e),o=t.map(s);return new Set(o)}(e,n),s=function(e){return Array.from(e.values()).join(", ")}(t);return s}),[n,e])}function te({data:e,inputRef:n,isDisabled:t,isFocused:s,isReadonly:o,onCommit:a,onFilter:l,onLoadRange:i,valueItems:r}){const c=p.useRef(null),u=p.useRef(null),[d,f]=p.useState(!1),[v,b]=p.useState(!1),[h,y]=p.useState({rowKey:void 0}),[g,m]=p.useState(),[x,S]=p.useState(!1),[T,A]=p.useState(),[F,w]=p.useState(),E=null==r?void 0:r.length,C=void 0!==E&&E>0||v;p.useEffect((()=>{const e=null==r?void 0:r.reduce(((e,n)=>(e.add(n.key),e)),new Set);m(e)}),[r]);const _=p.useRef(null);p.useEffect((()=>{_.current=C&&c.current?c.current.querySelector('[tabindex="0"]'):null}),[C,t,o]);const L=function({isDropdownSelectedOnlyView:e,valueItems:n}){return{data:p.useMemo((()=>{var t;return e&&n&&0!==n.length?{offset:0,totalSize:null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0,sizePrecision:"exact",data:n.map((e=>{var n;return{data:e.data,metadata:null!==(n=e.metadata)&&void 0!==n?n:{key:e.key}}}))}:void 0}),[e]),onLoadRange:void 0}}({isDropdownSelectedOnlyView:v,valueItems:r}),j=v?L.data:e,R=v?L.onLoadRange:i,D=p.useCallback((e=>{!e.defaultPrevented&&(e=>0===e.button&&!e.ctrlKey)(e)&&(d||f(!0),setTimeout((function(){var e;null===(e=n.current)||void 0===e||e.focus()}),0))}),[d,f]),k=p.useCallback((()=>{var e;f(!d),null===(e=n.current)||void 0===e||e.focus()}),[d]),O=p.useCallback((e=>{var t,s,o;if(d&&(f(!1),"keydown"===(null==e?void 0:e.type))){const a=e;switch(a.code){case N.ESC:null===(t=n.current)||void 0===t||t.focus();break;case N.TAB:a.shiftKey||!C?null===(s=n.current)||void 0===s||s.focus():null===(o=_.current)||void 0===o||o.focus()}}}),[C,d]),U=p.useCallback((e=>{var n,t,s,o;if(d){const e=null===(n=u.current)||void 0===n?void 0:n.querySelector('[tabindex="0"]');null==e||e.focus(),void 0!==j&&void 0===h.rowKey&&y({rowKey:null===(o=null===(s=null===(t=null==j?void 0:j.data)||void 0===t?void 0:t[0])||void 0===s?void 0:s.metadata)||void 0===o?void 0:o.key})}else f(!0);e.preventDefault()}),[h,j,d]),I=p.useCallback((e=>{if(!H(e))switch(e.code){case N.PAGE_UP:case N.PAGE_DOWN:return void e.preventDefault();case N.UP:case N.DOWN:e.preventDefault();break;case N.TAB:d&&(e.shiftKey||!C&&!e.shiftKey)&&f(!1);break;case N.ESC:d&&(f(!1),e.preventDefault())}}),[C,d]),P=p.useCallback((e=>{if(!H(e))switch(e.code){case N.UP:case N.DOWN:U(e)}}),[U]),K=p.useCallback((e=>{var n;d||f(!0),S(!0),A(e.value);const t=null===(n=e.value)||void 0===n?void 0:n.trim();w(t),null==l||l({searchText:t})}),[d,l]),M=p.useCallback((e=>{switch(e.code){case N.TAB:d&&!e.shiftKey&&f(!1);break;case N.UP:case N.DOWN:e.preventDefault();break;case N.ESC:d&&(f(!1),e.preventDefault())}}),[d]),z=p.useCallback((e=>{switch(e.code){case N.UP:case N.DOWN:U(e)}}),[U]),V=p.useCallback((e=>{var t;e.preventDefault(),null===(t=n.current)||void 0===t||t.focus()}),[]),W=p.useCallback((e=>{var n;d||f(!0);const t=null!==(n=e.value)&&void 0!==n&&n;t!==v&&b(t)}),[d,v]);p.useEffect((()=>{!d&&v&&b(!1)}),[d,v]);const B=p.useCallback((e=>{const n=e.value.keys;m(n),null==a||a({value:n,previousValue:g})}),[a,g]),$=p.useCallback((e=>{y({rowKey:e.value})}),[]);return p.useEffect((()=>{d&&y({rowKey:void 0})}),[d]),p.useEffect((()=>{d||s||!x||(S(!1),A(""),w(""))}),[d,s,x]),p.useEffect((()=>{d&&!x&&(null==l||l({searchText:void 0}))}),[d,x]),{collectionProps:{currentKey:h.rowKey,onCurrentKeyChange:$,onSelectionChange:B,selectedKeys:g},data:j,dropdownArrowEventHandlers:{onClick:k},dropdownEventHandlers:{onAutoDismiss:O},dropdownRef:u,hasSelectedValuesCount:C,inputEventHandlers:{onInput:K,onKeyDown:I,onKeyUp:P},inputRef:n,isDropdownOpen:d,isDropdownSelectedOnlyView:v,isFocused:s||d,isUserFiltering:x,mainFieldRef:c,mouseProps:t||o?{}:{onMouseDown:D},onLoadRange:R,searchText:F,selectedValuesCountProps:{onKeyDown:M,onKeyUp:z,onMouseDown:V,onToggle:W},userInput:T}}const se=s.forwardRef((({assistiveText:e,data:s,helpSourceLink:c,helpSourceText:b,id:p,isDisabled:h,isLoading:y,isReadonly:g,isRequired:m=!1,isRequiredShown:x,itemText:S,label:T,labelEdge:A,labelStartWidth:F,messages:w,onCommit:E,onFilter:C,onLoadRange:_,placeholder:L,textAlign:j,userAssistanceDensity:D,valueItems:U,virtualKeyboard:I},P)=>{const{isDisabled:N,isReadonly:H,labelEdge:M,labelStartWidth:V,textAlign:W,userAssistanceDensity:B}=a.useFormContext(),$=null!=h?h:N,G=null!=g?g:H,q=null!=A?A:M,Y=null!=F?F:V,J=null!=j?j:W,Q=null!=D?D:B,{enabledElementRef:se,focusProps:le,isFocused:ie,readonlyElementRef:re}=o.useFocusableTextField({isDisabled:$,isReadonly:G,ref:P}),{collectionProps:ce,data:ue,dropdownArrowEventHandlers:de,dropdownEventHandlers:fe,dropdownRef:ve,hasSelectedValuesCount:be,inputEventHandlers:pe,isDropdownOpen:he,isDropdownSelectedOnlyView:ye,isFocused:ge,isUserFiltering:me,mainFieldRef:xe,mouseProps:Se,onLoadRange:Te,searchText:Ae,selectedValuesCountProps:Fe,userInput:we}=te({data:s,inputRef:se,isDisabled:$,isFocused:ie,isReadonly:G,onCommit:E,onFilter:C,onLoadRange:_,valueItems:U}),Ee=i.useLoadingIndicatorTimer(null!=y&&y),{baseId:Ce,formFieldContext:_e,inputProps:Le,labelProps:je,textFieldProps:Re,userAssistanceProps:De}=r.useTextField({id:p,isDisabled:$,isFocused:ge,isLoading:Ee,isReadonly:G,labelEdge:q,messages:w,value:void 0!==U&&U.length>0||void 0}),ke=`${Ce}-dropdown`,Oe=ne(S,U),Ue="none"!==q?n.jsx(u.Label,Object.assign({},je,{children:T})):void 0,Ie={label:"none"!==q?Ue:void 0,labelEdge:"none"!==q?q:void 0,labelStartWidth:"none"!==q?Y:void 0},Pe="none"===q?T:void 0,Ke=$||G?"efficient"!==Q?void 0:n.jsx(v.InlineUserAssistance,Object.assign({userAssistanceDensity:Q},De)):n.jsx(v.InlineUserAssistance,Object.assign({assistiveText:e,fieldLabel:T,helpSourceLink:c,helpSourceText:b,messages:w,isRequiredShown:x,userAssistanceDensity:Q},De));if(G)return n.jsx(l.FormFieldContext.Provider,Object.assign({value:_e},{children:n.jsx(f.ReadonlyTextField,Object.assign({role:"presentation",inlineUserAssistance:Ke,onBlur:le.onfocusout,onFocus:le.onfocusin},Ie,{children:n.jsx(f.ReadonlyTextFieldInput,{ariaLabel:Pe,ariaLabelledby:je.id,as:"div",elementRef:re,hasInsideLabel:void 0!==T&&"inside"===q,id:Re.id,textAlign:J,value:Oe})}))}));const Ne=void 0!==Ue&&"inside"===q,He=R.useTranslationBundle("@oracle/oraclejet-preact"),Me=he&&null!=ue&&!ae(ue)?0===(null==ue?void 0:ue.totalSize)?He.select_noMatchesFound():1===(null==ue?void 0:ue.totalSize)?He.select_oneMatchFound():"exact"===(null==ue?void 0:ue.sizePrecision)?He.select_sizeMatchesFound({TOTAL_SIZE:`${null==ue?void 0:ue.totalSize}`}):He.select_sizeOrMoreMatchesFound({TOTAL_SIZE:`${null==ue?void 0:ue.totalSize}`}):"",ze=n.jsxs(t.Fragment,{children:[n.jsx(k.TextFieldInput,Object.assign({ariaAutocomplete:"list",ariaControls:ke,ariaExpanded:he,ariaLabel:Pe,autoComplete:"off",hasInsideLabel:Ne,inputRef:se,isRequired:m},pe,{placeholder:L,role:"combobox",spellcheck:!1,textAlign:J,type:oe()?I:void 0,value:me?we:Oe},Le)),n.jsx(d.LiveRegion,{children:Me})]}),Ve=n.jsx(Z,Object.assign({isDisabled:$,size:Ne?"md":"sm"},de)),We=null==U?void 0:U.length,Be=Ee?void 0:be?n.jsxs(O.Flex,Object.assign({align:"center",justify:"center",gap:[0,"1x"]},{children:[n.jsx(ee,Object.assign({accessibleLabel:T,count:We,isDisabled:$,isSelected:ye},Fe)),Ve]})):Ve;return n.jsxs(t.Fragment,{children:[n.jsx(l.FormFieldContext.Provider,Object.assign({value:_e},{children:n.jsx(f.TextField,Object.assign({endContent:Be,inlineUserAssistance:Ke,mainContent:ze,mainFieldRef:xe,onBlur:null==le?void 0:le.onfocusout,onFocus:null==le?void 0:le.onfocusin},Re,Ie,Se))})),n.jsx(z,Object.assign({dropdownRef:ve,id:ke,isOpen:he&&void 0!==ue&&(null===ue||ue.totalSize>0||ae(ue)),anchorRef:xe},fe,{children:n.jsx(X,Object.assign({isLoading:null===ue},{children:n.jsx(K,Object.assign({},ce,{accessibleSummary:null!=T?T:"",data:ue,itemText:S,onLoadRange:Te,searchText:ye?void 0:me?Ae:void 0}))}))}))]})}));function oe(){const e=U.getClientHints().deviceType;return"phone"===e||"tablet"===e}function ae(e){return"atLeast"===e.sizePrecision&&0===e.totalSize}e.KEYS=N,e.SelectMultiple=se}));
//# sourceMappingURL=SelectMultiple-cc90e018.js.map
