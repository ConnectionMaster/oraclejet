define(["exports","preact/jsx-runtime","preact","preact/compat","./hooks/UNSAFE_useFormContext","./hooks/UNSAFE_useFormFieldContext","./hooks/UNSAFE_useFocusableTextField","./UNSAFE_Label","./UNSAFE_TextField","./hooks/UNSAFE_useTextField","./UNSAFE_UserAssistance","./hooks/UNSAFE_useLengthFilter","preact/hooks","./hooks/UNSAFE_useCurrentValueReducer","./TextFieldInput-878a4f6a"],(function(e,t,s,n,i,l,a,o,r,d,u,c,x,m,p){"use strict";const g=({isReadonly:e,enabledElementRef:t,readonlyElementRef:s,minRows:n=2,maxRows:i,value:l})=>{x.useLayoutEffect((()=>{const l=e?s:t;if(null===l.current)return;const a=l.current,o=(e=>{const t=window.getComputedStyle(e),s=t.lineHeight;return"normal"===s?1.2*parseFloat(t.fontSize):parseFloat(s)})(a);a.style.height="0";const{paddingHeight:r,borderHeight:d}=(e=>{const t=window.getComputedStyle(e);return{paddingHeight:parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),borderHeight:parseFloat(t.borderTop)+parseFloat(t.borderBottom)}})(a),u=o*n+r+d,c=a.scrollHeight+d;var x=0;if(void 0===i)x=c<u?u:c;else if(i>n){const e=o*i+r+d;x=c>e?e:c<u?u:c}else x=u;a.style.height=x+.5+"px"}),[l,n,i,e])},h=n.forwardRef((({assistiveText:e,autoComplete:x="off",autoFocus:h=!1,helpSourceLink:F,helpSourceText:b,id:v,isDisabled:f,isReadonly:R,isRequired:y=!1,isRequiredShown:A,label:L,labelEdge:E,labelStartWidth:j,maxLength:S,maxLengthUnit:C,maxRows:T,messages:U,minRows:w=2,placeholder:k,role:I,textAlign:N,userAssistanceDensity:O,value:_,onInput:D,onCommit:P},H)=>{const{currentCommitValue:q,dispatch:V}=m.useCurrentValueReducer({value:_}),B=n.useCallback((e=>{V({type:"input",payload:e.value}),null==D||D(e)}),[D]),M=n.useCallback((e=>{V({type:"commit",payload:e.value}),null==P||P(e)}),[P]),{isDisabled:W,isReadonly:z,labelEdge:G,labelStartWidth:J,textAlign:K,userAssistanceDensity:Q}=i.useFormContext(),X=null!=f?f:W,Y=null!=R?R:z,Z=null!=E?E:G,$=null!=j?j:J,ee=null!=N?N:K,te=null!=O?O:Q,{enabledElementRef:se,readonlyElementRef:ne,focusProps:ie,isFocused:le}=a.useFocusableTextField({isDisabled:X,isReadonly:Y,ref:H}),{formFieldContext:ae,inputProps:oe,labelProps:re,textFieldProps:de,userAssistanceProps:ue}=d.useTextField({id:v,isDisabled:X,isFocused:le,isReadonly:Y,labelEdge:Z,messages:U,value:_,variant:"textarea"}),{isMaxLengthExceeded:ce,valueLength:xe,onFilteredInput:me}=c.useLengthFilter({maxLength:S,maxLengthUnit:C,value:_,onInput:B,onCommit:M}),pe="none"!==Z?t.jsx(o.Label,Object.assign({},re,{children:L})):void 0,ge={label:"none"!==Z?pe:void 0,labelEdge:"none"!==Z?Z:void 0,labelStartWidth:"none"!==Z?$:void 0},he="none"===Z?L:void 0,Fe=X||Y?"efficient"!==te?void 0:t.jsx(u.InlineUserAssistance,Object.assign({userAssistanceDensity:te},ue)):t.jsx(u.InlineUserAssistance,Object.assign({assistiveText:e,fieldLabel:L,helpSourceLink:F,helpSourceText:b,messages:U,isRequiredShown:A,userAssistanceDensity:te},ue));if(g({isReadonly:Y,enabledElementRef:se,readonlyElementRef:ne,minRows:w,maxRows:T,value:_}),Y)return t.jsx(l.FormFieldContext.Provider,Object.assign({value:ae},{children:t.jsx(r.ReadonlyTextField,Object.assign({role:"presentation",inlineUserAssistance:Fe,variant:"textarea"},ge,{children:t.jsx(r.ReadonlyTextFieldInput,{ariaLabel:he,ariaLabelledby:re.id,as:"textarea",elementRef:ne,rows:w,autoFocus:h,id:v,textAlign:ee,value:_,hasInsideLabel:void 0!==L&&"inside"===Z})}))}));const be=t.jsxs(s.Fragment,{children:[t.jsx(p.TextFieldInput,Object.assign({as:"textarea",ariaLabel:he,autoComplete:x,autoFocus:h,currentCommitValue:q,hasInsideLabel:void 0!==pe&&"inside"===Z,isRequired:y,inputRef:se,onCommit:M,onInput:me,placeholder:k,role:I,rows:w,textAlign:ee,value:_},oe)),void 0!==S&&t.jsx(r.MaxLengthLiveRegion,Object.assign({},{isMaxLengthExceeded:ce,maxLength:S,valueLength:xe}))]});return t.jsx(l.FormFieldContext.Provider,Object.assign({value:ae},{children:t.jsx(r.TextField,Object.assign({mainContent:be,inlineUserAssistance:Fe,onBlur:null==ie?void 0:ie.onfocusout,onFocus:null==ie?void 0:ie.onfocusin},de,ge))}))}));e.TextAreaAutosize=h}));
//# sourceMappingURL=TextAreaAutosize-29490bc0.js.map
