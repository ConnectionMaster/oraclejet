{"version":3,"file":"UNSAFE_ProgressBar.js","sources":["../../src/UNSAFE_ProgressBar/ProgressBar.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { JSX } from 'preact';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport type { BundleType } from '../resources/nls/bundle';\n\ntype IntrinsicProps = Pick<JSX.HTMLAttributes<HTMLDivElement>, 'id' | 'class' | 'children'>;\n\ntype Props = {\n  /**\n   * Specifies the id of the progress bar.  If the progress bar is being used to describe the loading process of a particular region\n   * of the page, then the aria-describedby attribute of the region must point to the id of the ProgressBar\n   */\n  id?: IntrinsicProps['id'];\n  /**\n   * The value of the progress bar.  If the value is 'indeterminate', an indeterminate progress bar will be shown.\n   */\n  value?: 'indeterminate' | number;\n\n  /**\n   * Whether the progress bar is positioned at the top edge of a container or not.\n   * If set to 'top', the curved borders will be removed.\n   */\n  edge?: 'none' | 'top';\n\n  /**\n   * The maximum value of the progress bar.\n   */\n  max?: number;\n  /**\n   * The width of the progress bar.  This will use the CSS lengths styling.\n   */\n  // TODO: use the dimensions work the Jeanne is doing JET-49961\n  width?: string;\n\n  /**\n   * A label to be used for accessibility purposes when value is set to 'indeterminate'.\n   */\n  accessibleLabel?: string;\n};\n\nexport function ProgressBar({ value, max, ...otherProps }: Props) {\n  return value === 'indeterminate' ? (\n    <IndeterminateProgressBar {...otherProps} />\n  ) : (\n    <DeterminateProgressBar value={value} max={max} {...otherProps} />\n  );\n}\n\ntype IndeterminateProps = Omit<Props, 'value' | 'max'>;\n\nconst IndeterminateProgressBar = ({\n  accessibleLabel,\n  id,\n  width,\n  edge = 'none'\n}: IndeterminateProps) => {\n  const { direction } = useUser();\n  const classes = classNames([styles.value, styles.indeterminate, styles[direction]]);\n  const baseClasses = classNames([styles.base, edge === 'none' && styles.standalone]);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  return (\n    <BarTrack\n      id={id}\n      ariaValueText={accessibleLabel || translations.progressIndeterminate()}\n      class={baseClasses}\n      width={width}>\n      <BarValue class={classes} />\n    </BarTrack>\n  );\n};\n\ntype DeterminateProps = Omit<Props, 'accessibleLabel'> & {\n  value?: number;\n};\n\nconst DeterminateProgressBar = ({\n  value = 0,\n  max = 100,\n  id,\n  width,\n  edge = 'none'\n}: DeterminateProps) => {\n  const percentage = `${Math.min(Math.max(0, value / max), 1) * 100}%`;\n  const baseClasses = classNames([styles.base, edge === 'none' && styles.standalone]);\n\n  return (\n    <BarTrack value={value} max={max} id={id} width={width} class={baseClasses}>\n      <BarValue class={styles.value} width={percentage} />\n    </BarTrack>\n  );\n};\n\ntype TrackProps = IntrinsicProps & {\n  value?: number;\n  max?: number;\n  min?: number;\n  width?: string;\n  color?: string;\n  ariaValueText?: string;\n};\nconst BarTrack = ({\n  value,\n  max,\n  min,\n  id,\n  width,\n  children,\n  ariaValueText,\n  color,\n  ...otherProps\n}: TrackProps) => {\n  const ariaMin = value != null ? (min ? min : '0') : null;\n  const ariaMax = value != null ? max : null;\n  const ariaNow = value != null ? value : null;\n  return (\n    <div\n      role=\"progressbar\"\n      id={id}\n      aria-valuemin={ariaMin}\n      aria-valuemax={ariaMax}\n      aria-valuenow={ariaNow}\n      aria-valuetext={ariaValueText}\n      class={otherProps.class}\n      style={{ width: width, backgroundColor: color }}>\n      {children}\n    </div>\n  );\n};\n\ntype ValueProps = Pick<IntrinsicProps, 'class'> & {\n  width?: string;\n  color?: string;\n};\n\nconst BarValue = ({ width, color, ...otherProps }: ValueProps) => {\n  return <div class={otherProps.class} style={{ width: width, backgroundColor: color }}></div>;\n};\n\nconst styles = {\n  base: cssProps`${{\n    height: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-height)',\n    position: 'relative',\n    boxSizing: 'border-box',\n    overflowX: 'hidden',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-track-bg-color)'\n  }}`,\n  value: cssProps`${{\n    margin: '0',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-value-bg-color)',\n    height: '100%',\n    boxSizing: 'border-box'\n  }}`,\n  indeterminate: cssProps`${{\n    width: '25%',\n    height: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-height)',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-value-bg-color)',\n    position: 'relative',\n    animationDuration: '2s',\n    animationTimingFunction: 'linear',\n    animationIterationCount: 'infinite'\n  }}`,\n  standalone: cssProps`${{\n    borderRadius: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-border-radius)'\n  }}`,\n  rtl: cssProps`${{\n    animationName: 'var(--oj-c-PRIVATE-DO-NOT-USE-private-progress-bar-indeterminate-animation-rtl)'\n  }}`,\n  ltr: cssProps`${{\n    animationName: 'var(--oj-c-PRIVATE-DO-NOT-USE-private-progress-bar-indeterminate-animation)'\n  }}`\n};\n"],"names":["ProgressBar","_a","value","_jsx","IndeterminateProgressBar","Object","assign","otherProps","DeterminateProgressBar","max","accessibleLabel","id","width","edge","direction","useUser","classes","classNames","styles","indeterminate","baseClasses","base","standalone","translations","useTranslationBundle","BarTrack","ariaValueText","progressIndeterminate","class","children","BarValue","percentage","ariaMax","ariaNow","role","ariaMin","style","backgroundColor","color"],"mappings":"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"}