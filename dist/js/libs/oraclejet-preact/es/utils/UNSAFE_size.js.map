{"version":3,"file":"UNSAFE_size.js","sources":["../../../src/utils/UNSAFE_size/size.ts"],"sourcesContent":["import { isString } from '../UNSAFE_stringUtils';\n\n// The Size type is used for gap and dimensions (e.g., width/height) and padding and similar\n// properties. Using the size function below we transform the property of this type into\n// something that is usable in a css style property.\n// `${number}x` gives an error for '25px' which is what we want.\nexport type Size = 0 | `--${string}` | `${number}%` | `${number}x`;\n\n/**\n * Given a value that is of type Size, transform the value into\n * something that is usable in a css style property.\n * @param {string | 0 } v - a value to transform\n * @returns {string | 0}\n */\nexport const sizeToCSS = (v: Size) => {\n  // We want '0%' and any non-string to return 0\n  if (v === 0 || parseFloat(v) === 0 || !isString(v)) {\n    return 0;\n  }\n\n  // from here down v is guaranteed to be a string\n  let css;\n  css = percentToCSS(v);\n  if (css !== null) {\n    return css;\n  }\n  css = doubleDashToCSS(v);\n  if (css !== null) {\n    return css;\n  }\n  css = xToCSS(v);\n  if (css !== null) {\n    return css;\n  }\n  // return 0 for any invalid v.\n  return 0;\n};\n\n/**\n * This transforms a number + 'x' to a css calc.\n * E.g., if v is '1.2x' this method returns `calc(1.2 * var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-1x))`\n * @param {string } v - a value to transform\n * @returns {string | null}\n */\nconst xToCSS = (v: string) => {\n  if (v.endsWith('x')) {\n    // parse out the 'x'\n    const nStr = v.slice(0, v.length - 1);\n    // nStr should now only contain characters that could be part of a floating number.\n    // I don't want a string with random characters in it to be ignored as it would with\n    // parseFloat, so I'm using Number here. parseFloat('1.2p') -> 1.2. whereas\n    // Number('1.2p') returns NaN.\n    const num = Number(nStr);\n    if (!isNaN(num)) {\n      // Note: 1x is equal to about 4px\n      return num === 1\n        ? `var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-1x)`\n        : `calc(${num} * var(--oj-c-PRIVATE-DO-NOT-USE-core-spacing-1x))`;\n    }\n  }\n  return null;\n};\n\n/**\n * This transforms a string that starts with '--' to a css var.\n * E.g., if v is '--oj-input-text' this method returns `var(--oj-input-text)`\n * @param {string } v - a value to transform\n * @returns {string | null}\n */\nconst doubleDashToCSS = (v: string) => {\n  if (v.startsWith('--')) {\n    return `var(${v})`;\n  }\n  return null;\n};\n\n/**\n * This checks if the string v ends with '%' and if so passes it out unchanged.\n * @param {string } v - a value to transform, if needed\n * @returns {string | null}\n */\nconst percentToCSS = (v: string) => {\n  if (v.endsWith('%')) {\n    return v;\n  }\n  return null;\n};\n"],"names":[],"mappings":";;;AAQA;;;;;AAKG;AACU,MAAA,SAAS,GAAG,CAAC,CAAO,KAAI;;AAEnC,IAAA,IAAI,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;AAClD,QAAA,OAAO,CAAC,CAAC;AACV,KAAA;;AAGD,IAAA,IAAI,GAAG,CAAC;AACR,IAAA,GAAG,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;IACtB,IAAI,GAAG,KAAK,IAAI,EAAE;AAChB,QAAA,OAAO,GAAG,CAAC;AACZ,KAAA;AACD,IAAA,GAAG,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;IACzB,IAAI,GAAG,KAAK,IAAI,EAAE;AAChB,QAAA,OAAO,GAAG,CAAC;AACZ,KAAA;AACD,IAAA,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;IAChB,IAAI,GAAG,KAAK,IAAI,EAAE;AAChB,QAAA,OAAO,GAAG,CAAC;AACZ,KAAA;;AAED,IAAA,OAAO,CAAC,CAAC;AACX,EAAE;AAEF;;;;;AAKG;AACH,MAAM,MAAM,GAAG,CAAC,CAAS,KAAI;AAC3B,IAAA,IAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;;AAEnB,QAAA,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;;;;AAKtC,QAAA,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,QAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;;YAEf,OAAO,GAAG,KAAK,CAAC;AACd,kBAAE,CAAgD,8CAAA,CAAA;AAClD,kBAAE,CAAA,KAAA,EAAQ,GAAG,CAAA,kDAAA,CAAoD,CAAC;AACrE,SAAA;AACF,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF;;;;;AAKG;AACH,MAAM,eAAe,GAAG,CAAC,CAAS,KAAI;AACpC,IAAA,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;QACtB,OAAO,CAAA,IAAA,EAAO,CAAC,CAAA,CAAA,CAAG,CAAC;AACpB,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF;;;;AAIG;AACH,MAAM,YAAY,GAAG,CAAC,CAAS,KAAI;AACjC,IAAA,IAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACnB,QAAA,OAAO,CAAC,CAAC;AACV,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC;;;;;;;"}